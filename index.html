<!DOCTYPE html>
<html>
<head>
<title>Flappy Store</title>
<style>
body {
    background: #4a63a7;
    font-family: Segoe UI, sans-serif;
    color: white;
}

/* Windows 7 item cards */
.item {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(8px);
    padding: 15px;
    width: 200px;
    border-radius: 15px;
    margin: 10px;
    display: inline-block;
    text-align: center;
}

.item img {
    width: 120px;
}

button {
    padding: 8px 15px;
    border-radius: 10px;
    background: #e3ecff;
    border: none;
    cursor: pointer;
}

#cartList li {
    margin: 5px 0;
    font-size: 18px;
}

.removeBtn {
    margin-left: 15px;
    background: #ffd5d5;
}
</style>
</head>
<body>

<h1>üü° Flappy Store</h1>

<!-- Sound -->
<audio id="dingSound">
  <source src="https://files.catbox.moe/8n6a3r.mp3" type="audio/mpeg">
</audio>

<!-- Search -->
<input id="searchBar" placeholder="Search‚Ä¶" onkeyup="renderItems()" />

<!-- Category -->
<select id="categorySelect" onchange="renderItems()">
    <option value="all">All</option>
    <option value="games">Games</option>
</select>

<hr>

<!-- Items Container -->
<div id="itemsContainer"></div>

<hr>

<h2>üõí Cart</h2>
<ul id="cartList"></ul>

<p><b>Total: NT$<span id="total">0</span></b></p>
<p><b>Payment: <span id="paymentRule">Cash Only</span></b></p>

<button onclick="checkout()">Checkout</button>

<script>
/* ITEMS ‚Äî only 1 as you requested */
const items = [
    {
        name: "Flappy Bird",
        price: 0,
        category: "games",
        img: "https://upload.wikimedia.org/wikipedia/en/0/0a/Flappy_Bird_icon.png"
    }
];

let cart = [];
let total = 0;

/* Add to Cart */
function addToCart(name, price) {
    const qty = parseInt(document.getElementById("qty-" + name).value);

    const existing = cart.find(i => i.name === name);

    if (existing) {
        existing.qty += qty;
    } else {
        cart.push({ name, price, qty });
    }

    document.getElementById("dingSound").play();
    renderCart();
}

/* Render Cart */
function renderCart() {
    const list = document.getElementById("cartList");
    list.innerHTML = "";

    total = 0;

    cart.forEach((item, index) => {
        subtotal = item.price * item.qty;
        total += subtotal;

        list.innerHTML += `
            <li>
                ${item.name} √ó ${item.qty} ‚Äî NT$${subtotal}
                <button class="removeBtn" onclick="removeItem(${index})">‚ùå</button>
            </li>
        `;
    });

    document.getElementById("total").innerText = total;
    document.getElementById("paymentRule").innerText =
        total >= 500 ? "Cash Before Delivery" : "Cash Only";
}

/* Remove */
function removeItem(i) {
    cart.splice(i, 1);
    renderCart();
}

/* Checkout email */
function checkout() {
    if (cart.length == 0) {
        alert("Cart empty!");
        return;
    }

    const order = cart
      .map(i => `${i.name} √ó ${i.qty} ‚Äî NT$${i.price * i.qty}`)
      .join("%0A");

    const payment = total >= 500 ? "Cash Before Delivery" : "Cash Only";

    window.location.href =
      `mailto:leofoooo132@gmail.com?subject=New Order&body=${order}%0A%0ATotal: NT$${total}%0APayment: ${payment}`;
}

/* Render Items */
function renderItems() {
    const container = document.getElementById("itemsContainer");
    container.innerHTML = "";

    const search = document.getElementById("searchBar").value.toLowerCase();
    const category = document.getElementById("categorySelect").value;

    items.filter(item =>
        (category === "all" || item.category === category) &&
        item.name.toLowerCase().includes(search)
    )
    .forEach(item => {
        container.innerHTML += `
            <div class="item">
                <img src="${item.img}">
                <h3>${item.name}</h3>
                <p>Price: NT$${item.price}</p>

                Qty: <input type="number" id="qty-${item.name}" value="1" min="1" style="width:50px;">

                <br><br>
                <button onclick="addToCart('${item.name}', ${item.price})">Add to Cart</button>
            </div>
        `;
    });
}

renderItems();
</script>

</body>
</html>
