import streamlit as st
import random
from PIL import Image, ImageDraw, ImageFont
import io

# --- PAGE CONFIG ---
st.set_page_config(page_title="üõí Common Store", layout="wide")
st.title("üè™ Common Store - Browse Items")

# --- CATEGORIES (EMPTY ITEMS) ---
categories = ["Electronics", "Stationery", "Accessories", "Clothing", "Kitchen", "Sports", "Toys"]

# Each category has **zero** items
items = {
    "Electronics": [],
    "Stationery": [],
    "Accessories": [],
    "Clothing": [],
    "Kitchen": [],
    "Sports": [],
    "Toys": []
}

# --- SESSION STATE ---
if "cart" not in st.session_state:
    st.session_state.cart = {}

if "popup" not in st.session_state:
    st.session_state.popup = ""

# --- FUNCTIONS ---
def add_to_cart(name, price):
    if name not in st.session_state.cart:
        st.session_state.cart[name] = {"price": price, "qty": 1}
    else:
        st.session_state.cart[name]["qty"] += 1

    st.session_state.popup = f"‚úÖ Added **{name}** to cart!"
    st.experimental_rerun()

def show_popup():
    if st.session_state.popup:
        st.success(st.session_state.popup)
        st.session_state.popup = ""

# --- SIDEBAR CART ---
with st.sidebar:
    st.header("üõí Cart")
    
    if not st.session_state.cart:
        st.write("Your cart is empty.")
    else:
        total = 0
        for item, info in st.session_state.cart.items():
            st.write(f"**{item}** ‚Äî ${info['price']} √ó {info['qty']}")
            total += info["price"] * info["qty"]

        st.write("---")
        st.subheader(f"Total: **${total}**")

        st.write("### üí≥ Payment Method")
        payment = st.selectbox("Choose payment method:", ["Cash", "Credit Card", "Mobile Pay"])

        st.write("### üöö Delivery Option")
        delivery = st.radio("Choose delivery:", ["Pickup", "Home Delivery"])

        st.button("Checkout")

# --- ITEM DISPLAY (EMPTY) ---
show_popup()

st.write("‚ö†Ô∏è No items available yet. Add your own items to begin selling!")
st.info("Your store is clean and ready ‚Äî add items manually in the `items` dictionary.")
