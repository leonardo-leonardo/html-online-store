<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Windows 7 Online Store - Enhanced</title>

<style>
    body {
        font-family: Segoe UI, Arial;
        background: linear-gradient(#cdd9ee, #f0f4fa);
        margin: 0;
        padding: 0;
    }

    /* AERO HEADER */
    .header {
        backdrop-filter: blur(6px);
        background: rgba(255,255,255,0.45);
        border-bottom: 1px solid #a5b6d3;
        padding: 22px;
        text-align: center;
        font-size: 30px;
        font-weight: bold;
        color: #1a3f7a;
        text-shadow: 0px 1px 2px white;
        animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .wrapper {
        width: 1100px;
        margin: auto;
        margin-top: 20px;
    }

    /* AERO PANEL */
    .panel {
        background: rgba(255,255,255,0.78);
        border: 1px solid #b8c6d9;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        animation: aeroBlur 0.8s ease;
    }

    @keyframes aeroBlur {
        from { backdrop-filter: blur(0px); }
        to { backdrop-filter: blur(6px); }
    }

    /* STORE ITEMS */
    .item {
        width: 270px;
        display: inline-block;
        vertical-align: top;
        margin: 15px;
        padding: 15px;
        background: white;
        border-radius: 10px;
        border: 1px solid #d0d7e6;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .item:hover {
        transform: scale(1.03);
        box-shadow: 0px 0px 18px rgba(0,0,0,0.28);
    }

    .item h3 {
        margin: 0 0 10px 0;
        color: #214f97;
    }

    /* BUTTON (WIN7 STYLE) */
    button {
        background: linear-gradient(#ffffff, #e4e9f3);
        border: 1px solid #9caec9;
        border-radius: 6px;
        padding: 7px 14px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: inset 0 1px 1px white;
        transition: 0.2s;
    }

    button:hover {
        background: linear-gradient(#f6faff, #d7e2f5);
        border-color: #7c92b8;
    }

    /* CART REMOVE BUTTON */
    .remove-btn {
        float: right;
        background: #ffe5e5;
        border: 1px solid #cc9b9b;
        padding: 2px 8px;
        border-radius: 4px;
    }

    /* TASKBAR */
    .taskbar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 38px;
        background: linear-gradient(#e7ecf5, #c3cedc);
        border-top: 1px solid #a5b6d3;
        box-shadow: 0px -2px 6px rgba(0,0,0,0.25);
        display: flex;
        align-items: center;
        padding-left: 15px;
        font-size: 15px;
        color: #1c3d75;
    }

    /* SEARCH + CATEGORY */
    .controls {
        margin-bottom: 15px;
    }
</style>
</head>

<body>

<!-- WINDOWS 7 DING SOUND (BASE64) -->
<audio id="dingSound">
    <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=" type="audio/wav">
</audio>

<div class="header">ðŸŒŸ Windows 7 Online Store - Enhanced ðŸŒŸ</div>

<div class="wrapper">

    <!-- SEARCH & CATEGORY -->
    <div class="panel">
        <div class="controls">
            <input id="searchBox" type="text" placeholder="ðŸ” Search items..." style="padding:6px; width:200px;">
            
            <select id="categoryFilter" style="padding:6px;">
                <option value="all">All Categories</option>
                <option value="electronics">Electronics</option>
                <option value="stationery">Stationery</option>
                <option value="accessories">Accessories</option>
            </select>

            <button onclick="applyFilters()">Apply</button>
        </div>
    </div>

    <!-- STORE ITEMS -->
    <div class="panel" id="storePanel">
        <h2>Items</h2>

        <!-- ITEMS WILL BE INSERTED DYNAMICALLY -->
        <div id="itemContainer"></div>
    </div>

    <!-- CART PANEL -->
    <div class="panel">
        <h2>Your Cart</h2>

        <ul id="cartList"></ul>

        <p><strong>Total: NT$<span id="total">0</span></strong></p>
        <p id="paymentRule" style="font-weight:bold; color:#003c74;">Cash Only</p>

        <button onclick="checkout()">Checkout</button>
    </div>

</div>

<!-- WINDOWS 7 TASKBAR -->
<div class="taskbar">
    ðŸªŸ Windows 7 Mode Active â€” Simple Store
</div>

<script>
/* ---------------------------- ITEMS ---------------------------- */
const items = [
    { name: "Logitech M330 Silent Mouse", price: 450, category: "electronics" },
    { name: "Anker PowerLine+ USB-C Cable", price: 320, category: "electronics" },
    { name: "Xiaomi 10,000mAh Power Bank", price: 399, category: "electronics" },
    { name: "Notebook A5 Hardcover", price: 120, category: "stationery" },
    { name: "Pilot G-2 Pen Set (3 pcs)", price: 95, category: "stationery" },
    { name: "Stainless Thermal Bottle 500ml", price: 280, category: "accessories" }
];

let cart = [];
let total = 0;

/* ------------------------ RENDER ITEMS ------------------------- */
function renderItems(list) {
    const box = document.getElementById("itemContainer");
    box.innerHTML = "";

    list.forEach(item => {
        box.innerHTML += `
        <div class="item">
            <h3>${item.name}</h3>
            <p>NT$${item.price}</p>
            <label>Qty: </label>
            <input type="number" id="qty_${item.name}" value="1" min="1" style="width:50px;">
            <br><br>
            <button onclick="addToCart('${item.name}', ${item.price})">Add to Cart</button>
        </div>`;
    });
}

renderItems(items);

/* -------------------------- FILTERS --------------------------- */
function applyFilters() {
    const search = document.getElementById("searchBox").value.toLowerCase();
    const category = document.getElementById("categoryFilter").value;

    const result = items.filter(i =>
        (category === "all" || i.category === category) &&
        i.name.toLowerCase().includes(search)
    );

    renderItems(result);
}

/* ------------------------- CART LOGIC -------------------------- */

function addToCart(name, price) {
    const qty = parseInt(document.getElementById(`qty_${name}`).value);

    for (let i = 0; i < qty; i++) {
        cart.push({ name, price });
        total += price;
    }

    document.getElementById("dingSound").play();
    renderCart();

    alert(`${qty} x ${name} added to cart!`);
}

function renderCart() {
    const cartList = document.getElementById("cartList");
    cartList.innerHTML = "";

    cart.forEach((item, index) => {
        cartList.innerHTML += `
        <li>
            ${item.name} â€“ NT$${item.price}
            <button class="remove-btn" onclick="removeItem(${index})">x</button>
        </li>`;
    });

    document.getElementById("total").textContent = total;

    if (total >= 500) {
        paymentRule.textContent = "Cash Before Delivery (NT$500+)";
    } else {
        paymentRule.textContent = "Cash Only (Pay on delivery)";
    }
}

function removeItem(index) {
    total -= cart[index].price;
    cart.splice(index, 1);
    renderCart();
}

/* ------------------------- CHECKOUT ---------------------------- */

function checkout() {
    if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
    }

    const orderText = cart.map(i => `${i.name} - NT$${i.price}`).join("%0A");

    const subject = encodeURIComponent("New Order");
    const body = encodeURIComponent(
        `Order Details:%0A${orderText}%0A%0ATotal: NT$${total}%0A` +
        `Payment: ${total >= 500 ? "Cash Before Delivery" : "Cash Only"}`
    );

    window.location.href =
        `mailto:leofoooo132@gmail.com?subject=${subject}&body=${body}`;
}

</script>
</body>
</html>
